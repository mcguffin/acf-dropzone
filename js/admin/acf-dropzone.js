!function(){"use strict";var e=wp.media.View.extend({tagName:"div",className:"acf-dropzone-info",template:wp.template("acf-dropzone-info")}),t=wp.media.View.extend({template:wp.template("acf-dropzone-notice"),className:"notice is-dismissible",events:{"click .notice-dismiss":"remove"},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$el.addClass(this.options.type),this}}),i={};(function(e){(function(){var t;(t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null)&&t.__esModule,i=Backbone.View.extend({events:{focus:"listenPaste",blur:"stopListenPaste"},listenPaste:function(e){var t=this;this.$el.on("paste",function(){t.onPaste.apply(t,arguments)})},stopListenPaste:function(){this.$el.off("paste")},initialize:function(e){return Backbone.View.prototype.initialize.apply(this,arguments),this.controller=e.controller,this},render:function(){return this.$el.attr("tabindex","-1"),this},onPaste:function(e){e.preventDefault(),e.stopPropagation();var t,i,o=e.originalEvent.clipboardData.items;for(t=0;t<o.length;t++)"file"===o[t].kind&&(i=o[t].getAsFile())&&(this.controller.uploader.uploader.param("post_data",{post_title:wp.template("acf-dropzone-attachment-title")({fieldname:this.controller.field.get("name")}).trim(),post_type:"attachment"}),this.controller.uploader.uploader.uploader.addFile(i,i.name));return this}})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var o={};(function(e){(function(){var t,i=(t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null)&&t.__esModule?t:{default:t};o=Backbone.View.extend({tagName:"div",className:"media-progress-bar-box",render:function(){return this.$progress=(0,i.default)("<div />").addClass("media-progress-bar"),this.$label=(0,i.default)("<div />").addClass("media-progress-label"),this.$bar=(0,i.default)("<div />"),this.$el.append(this.$label),this.$progress.append(this.$bar).appendTo(this.$el),this},setLabel:function(e){return this.$label.text(e),this},setProgress:function(e){return this.$bar.width(e+"%"),this}})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var n={};(function(e){(function(){var r=l("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null),d=l(t),a=l(i),s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}n=Backbone.View.extend({initialize:function(e){return this.field=e.field,this.notice=!1,this.progress=!1,this.uploader=new wp.media.view.UploaderWindow({controller:this,uploader:{dropzone:this.el,container:this.el,params:{_acfuploader:this.field.get("key")}}}),this.pasteboard=new a.default({controller:this,el:this.$el.is('[data-uploader="wp"]')?this.el:this.field.$(".acf-gallery-attachments").get(0)}),this},render:function(){return(0,r.default)(this.uploader.render().el).appendTo(this.el),this.pasteboard.render(),this},ready:function(){var e=this;return this.$el.on("drop dragenter dragleave dragover",function(e){e.stopPropagation()}).on("drop",function(t){e.removeNotice()}),this.trigger("activate"),this.uploader.ready(),this.uploader.uploader.uploader.bind("FilesAdded",this.filesAdded,this),this.uploader.uploader.uploader.bind("BeforeUpload",this.fileBeforeUpload,this),this.uploader.uploader.uploader.bind("UploadProgress",this.fileUploadProgress,this),this.uploader.uploader.uploader.bind("FileUploaded",this.fileUploaded,this),this.uploader.uploader.uploader.bind("error",this.fileUploadError,this),this.pasteboard.render(),this},filesAdded:function(e,t){this.total=t.length,this.done=0},fileBeforeUpload:function(e,t){this.addProgress(),this.progress.setLabel(_.escape(t.name))},fileUploadProgress:function(e,t){this.addProgress(),this.progress.setProgress((100*this.done+t.percent)/this.total)},fileUploaded:function(e,t,i){var o;this.file=t;try{this.trigger("acf-dropzone-uploaded",t.attachment,this.done),this.done++,this.total===this.done&&this.removeProgress()}catch(n){try{o=JSON.parse(i.response),this.fileUploadError(e,{file:this.file,message:o.data.message})}catch(r){this.fileUploadError(e,{file:this.file,message:i.response})}}},fileUploadError:function(e,t){this.done++,this.total===this.done&&this.removeProgress(),this.trigger("acf-dropzone-error",t),this.addNotice({type:"error",bold:_.escape(t.file.name),message:t.message})},addProgress:function(){return this.progress?this:(this.progress=new s.default,this.progress.render().$el.prependTo(this.el),this)},removeProgress:function(e){return this.progress?(this.progress.$el.remove(),this.progress=!1,this):this},addNotice:function(e){return this.notice=new d.default(e),this.notice.render(),this.notice.$el.prependTo(this.el),this},removeNotice:function(e){return this.notice&&(this.notice.remove(),this.notice=!1),this}})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),function(t){(function(){r("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null);var i=r(e),o=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t,n,r,d;e.$el.is(".dropzone")&&(n=e.parent(),(t=e.$('[data-uploader="wp"]').get(0))&&(e.$(".hide-if-value>p").contents().filter(function(){return 3==this.nodeType}).remove(),(r=new i.default({or:!0})).render(),r.$el.prependTo(e.$(".hide-if-value")),(d=new o.default({el:t,field:e})).render(),d.ready(),d.on("acf-dropzone-uploaded",function(t,i){n&&"repeater"===n.get("type")&&i>0?e.append(t,n):e.render(t)})))},a=function(e){var t,n,r=e.$(".acf-gallery-attachments").get(0);e.$el.is(".dropzone")&&((n=new i.default({or:!1})).render(),n.$el.prependTo(r),(t=new o.default({el:r,field:e})).render(),t.ready(),t.on("acf-dropzone-uploaded",function(t){e.appendAttachment(t,"prepend"===e.get("insert")?0:void 0)}))};acf.addAction("ready_field/type=image",d),acf.addAction("ready_field/type=file",d),acf.addAction("ready_field/type=gallery",a),acf.addAction("append_field/type=image",d),acf.addAction("append_field/type=file",d),acf.addAction("append_field/type=gallery",a)}).call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsInNyYy9qcy9saWIvdXBsb2FkZXItaW5mby5qcyIsInNyYy9qcy9saWIvbm90aWNlLmpzIiwic3JjL2pzL2xpYi9wYXN0ZWJvYXJkLmpzIiwic3JjL2pzL2xpYi9wcm9ncmVzcy5qcyIsInNyYy9qcy9saWIvYWNmLWRyb3B6b25lLmpzIiwic3JjL2pzL2FkbWluL2FjZi1kcm9wem9uZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJfJHVwbG9hZGVySW5mb182Iiwid3AiLCJtZWRpYSIsIlZpZXciLCJleHRlbmQiLCJ0YWdOYW1lIiwiY2xhc3NOYW1lIiwidGVtcGxhdGUiLCJfJG5vdGljZV8zIiwiZXZlbnRzIiwiY2xpY2sgLm5vdGljZS1kaXNtaXNzIiwicmVuZGVyIiwicHJvdG90eXBlIiwiYXBwbHkiLCJ0aGlzIiwiYXJndW1lbnRzIiwiJGVsIiwiYWRkQ2xhc3MiLCJvcHRpb25zIiwidHlwZSIsIm9iaiIsIndpbmRvdyIsImpRdWVyeSIsImdsb2JhbCIsIl9fZXNNb2R1bGUiLCJfJHBhc3RlYm9hcmRfNCIsIkJhY2tib25lIiwiZm9jdXMiLCJibHVyIiwibGlzdGVuUGFzdGUiLCJlIiwic2VsZiIsIm9uIiwib25QYXN0ZSIsInN0b3BMaXN0ZW5QYXN0ZSIsIm9mZiIsImluaXRpYWxpemUiLCJvcHQiLCJjb250cm9sbGVyIiwiYXR0ciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiaSIsImJsb2IiLCJpdGVtcyIsIm9yaWdpbmFsRXZlbnQiLCJjbGlwYm9hcmREYXRhIiwibGVuZ3RoIiwia2luZCIsImdldEFzRmlsZSIsInVwbG9hZGVyIiwicGFyYW0iLCJwb3N0X3RpdGxlIiwiZmllbGRuYW1lIiwiZmllbGQiLCJnZXQiLCJ0cmltIiwicG9zdF90eXBlIiwiYWRkRmlsZSIsIm5hbWUiLCJfanF1ZXJ5IiwiZGVmYXVsdCIsIl8kcHJvZ3Jlc3NfNSIsIiRwcm9ncmVzcyIsIiRsYWJlbCIsIiRiYXIiLCJhcHBlbmQiLCJhcHBlbmRUbyIsInNldExhYmVsIiwibGFiZWwiLCJ0ZXh0Iiwic2V0UHJvZ3Jlc3MiLCJwZXJjZW50Iiwid2lkdGgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX25vdGljZSIsIl9wYXN0ZWJvYXJkIiwiX3Byb2dyZXNzIiwiXyRhY2ZEcm9wem9uZV8yIiwibm90aWNlIiwicHJvZ3Jlc3MiLCJ2aWV3IiwiVXBsb2FkZXJXaW5kb3ciLCJkcm9wem9uZSIsImVsIiwiY29udGFpbmVyIiwicGFyYW1zIiwiX2FjZnVwbG9hZGVyIiwicGFzdGVib2FyZCIsImlzIiwiJCIsInJlYWR5IiwicmVtb3ZlTm90aWNlIiwidHJpZ2dlciIsImJpbmQiLCJmaWxlc0FkZGVkIiwiZmlsZUJlZm9yZVVwbG9hZCIsImZpbGVVcGxvYWRQcm9ncmVzcyIsImZpbGVVcGxvYWRlZCIsImZpbGVVcGxvYWRFcnJvciIsImZpbGVzIiwidG90YWwiLCJkb25lIiwiZmlsZSIsImFkZFByb2dyZXNzIiwiXyIsImVzY2FwZSIsInJlc3BvbnNlIiwicmVzdWx0IiwiYXR0YWNobWVudCIsInJlbW92ZVByb2dyZXNzIiwiZXJyIiwiSlNPTiIsInBhcnNlIiwibWVzc2FnZSIsImRhdGEiLCJlcnIyIiwiZXJyb3IiLCJhZGROb3RpY2UiLCJib2xkIiwicHJlcGVuZFRvIiwicmVtb3ZlIiwiX3VwbG9hZGVySW5mbyIsIl9hY2ZEcm9wem9uZSIsImluaXRGaWxlRHJvcHpvbmUiLCJwYXJlbnQiLCJpbmZvIiwiY29udGVudHMiLCJmaWx0ZXIiLCJub2RlVHlwZSIsIm9yIiwiaW5pdEdhbGxlcnlEcm9wem9uZSIsImFwcGVuZEF0dGFjaG1lbnQiLCJhY2YiLCJhZGRBY3Rpb24iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsYUNBQSxJQUFBQSxFQUFpQkMsR0FBR0MsTUFBTUMsS0FBS0MsT0FBTyxDQUNyQ0MsUUFBVyxNQUNYQyxVQUFXLG9CQUNYQyxTQUFTTixHQUFHTSxTQUFTLHVCQ0h0QkMs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RkssRUFBTyxJQUFJSixFQUFBN0QsUUFBYSxDQUFDcUUsSUFBQSxLQUNwQnZILFNBQ0xtSCxFQUFLOUcsSUFBSXdHLFVBQVdsRSxFQUFNb0MsRUFBRSxvQkFHNUJQLEVBQVcsSUFBSXdDLEVBQUE5RCxRQUFZLENBQzFCdUIsR0FBSUEsRUFDSjlCLE1BQU9BLEtBRUMzQyxTQUNUd0UsRUFBU1EsUUFDVFIsRUFBU25ELEdBQUcsd0JBQXlCLFNBQUU2RSxFQUFZbkUsR0FDN0NtRixHQUFpQyxhQUF2QkEsRUFBT3RFLElBQUksU0FBMEJiLEVBQUksRUFDdkRZLEVBQU1ZLE9BQVEyQyxFQUFZZ0IsR0FFMUJ2RSxFQUFNM0MsT0FBT2tHLFFBSVZzQixFQUFzQixTQUFBN0UsR0FFM0IsSUFBSTZCLEVBQ0gyQyxFQUNBMUMsRUFBSzlCLEVBQU1vQyxFQUFFLDRCQUE0Qm5DLElBQUksR0FFdkNELEVBQU10QyxJQUFJeUUsR0FBRyxnQkFJcEJxQyxFQUFPLElBQUlKLEVBQUE3RCxRQUFhLENBQUNxRSxJQUFBLEtBQ3BCdkgsU0FDTG1ILEVBQUs5RyxJQUFJd0csVUFBV3BDLElBRXBCRCxFQUFXLElBQUl3QyxFQUFBOUQsUUFBWSxDQUMxQnVCLEdBQUlBLEVBQ0o5QixNQUFPQSxLQUVDM0MsU0FDVHdFLEVBQVNRLFFBQ1RSLEVBQVNuRCxHQUFHLHdCQUF5QixTQUFBNkUsR0FFcEN2RCxFQUFNOEUsaUJBQ0x2QixFQUN3QixZQUF4QnZELEVBQU1DLElBQUksVUFBMEIsT0FBQSxPQU92QzhFLElBQUlDLFVBQVcseUJBQTRCVixHQUMzQ1MsSUFBSUMsVUFBVyx3QkFBNEJWLEdBQzNDUyxJQUFJQyxVQUFXLDJCQUE0QkgsR0FHM0NFLElBQUlDLFVBQVcsMEJBQTZCVixHQUM1Q1MsSUFBSUMsVUFBVyx5QkFBNkJWLEdBQzVDUyxJQUFJQyxVQUFXLDRCQUE2QkgsaUlOeEY1QyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xuIiwiXG5tb2R1bGUuZXhwb3J0cyA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0dGFnTmFtZTogICAnZGl2Jyxcblx0Y2xhc3NOYW1lOiAnYWNmLWRyb3B6b25lLWluZm8nLFxuXHR0ZW1wbGF0ZTp3cC50ZW1wbGF0ZSgnYWNmLWRyb3B6b25lLWluZm8nKVxufSk7XG4iLCJcbm1vZHVsZS5leHBvcnRzID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHR0ZW1wbGF0ZTp3cC50ZW1wbGF0ZSgnYWNmLWRyb3B6b25lLW5vdGljZScpLFxuXHRjbGFzc05hbWU6J25vdGljZSBpcy1kaXNtaXNzaWJsZScsXG5cdGV2ZW50czp7XG5cdFx0J2NsaWNrIC5ub3RpY2UtZGlzbWlzcycgOiAncmVtb3ZlJyxcblx0fSxcblx0cmVuZGVyOmZ1bmN0aW9uKCkge1xuXG5cdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdHRoaXMuJGVsLmFkZENsYXNzKHRoaXMub3B0aW9ucy50eXBlKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59KVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxubW9kdWxlLmV4cG9ydHMgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG5cdGV2ZW50czoge1xuXHRcdGZvY3VzOidsaXN0ZW5QYXN0ZScsXG5cdFx0Ymx1cjonc3RvcExpc3RlblBhc3RlJ1xuXHR9LFxuXHRsaXN0ZW5QYXN0ZTpmdW5jdGlvbihlKXtcblx0XHRjb25zdCBzZWxmID0gdGhpcztcblx0XHR0aGlzLiRlbC5vbigncGFzdGUnLGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5vblBhc3RlLmFwcGx5KCBzZWxmLCBhcmd1bWVudHMgKTtcblx0XHR9KTtcblx0fSxcblx0c3RvcExpc3RlblBhc3RlOmZ1bmN0aW9uKCl7XG5cdFx0dGhpcy4kZWwub2ZmKCdwYXN0ZScpO1xuXHR9LFxuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHQpIHtcblx0XHRCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR0aGlzLmNvbnRyb2xsZXIgPSBvcHQuY29udHJvbGxlcjtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHQvLyBtYWtlIGZvY3Vzc2FibGVcblx0XHR0aGlzLiRlbC5hdHRyKCd0YWJpbmRleCcsJy0xJyk7Ly8uYXR0cignY29udGVudGVkaXRhYmxlJywndHJ1ZScpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRvblBhc3RlOmZ1bmN0aW9uKGUpe1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0Y29uc3QgaXRlbXMgPSBlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5pdGVtcztcblx0XHRsZXQgaSwgYmxvYiwgZmlsZSwgZmlsZW5hbWU7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrICkge1xuXG5cdFx0XHRpZiAoIGl0ZW1zW2ldLmtpbmQgIT09ICdmaWxlJyApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGdldCBwYXN0ZWQgZmlsZSAuLi5cblx0XHRcdGJsb2IgPSBpdGVtc1tpXS5nZXRBc0ZpbGUoKTtcblx0XHRcdGlmICggISEgYmxvYiApIHtcblx0XHRcdFx0Ly8gLi4uIGFkZCB0byBwbHVwbG9hZFxuXG5cblx0XHRcdFx0dGhpcy5jb250cm9sbGVyLnVwbG9hZGVyLnVwbG9hZGVyLnBhcmFtKCdwb3N0X2RhdGEnLCB7XG5cdFx0XHRcdFx0cG9zdF90aXRsZTogd3AudGVtcGxhdGUoJ2FjZi1kcm9wem9uZS1hdHRhY2htZW50LXRpdGxlJykoe1xuXHRcdFx0XHRcdFx0ZmllbGRuYW1lOnRoaXMuY29udHJvbGxlci5maWVsZC5nZXQoJ25hbWUnKVxuXHRcdFx0XHRcdH0pLnRyaW0oKSxcblx0XHRcdFx0XHRwb3N0X3R5cGU6ICdhdHRhY2htZW50J1xuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHRoaXMuY29udHJvbGxlci51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5hZGRGaWxlKCBibG9iLCBibG9iLm5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0pO1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxubW9kdWxlLmV4cG9ydHMgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG5cdHRhZ05hbWU6ICAgJ2RpdicsXG5cdGNsYXNzTmFtZTogJ21lZGlhLXByb2dyZXNzLWJhci1ib3gnLFxuXHRyZW5kZXI6ZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy4kcHJvZ3Jlc3MgPSAkKCc8ZGl2IC8+JykuYWRkQ2xhc3MoJ21lZGlhLXByb2dyZXNzLWJhcicpO1xuXHRcdHRoaXMuJGxhYmVsID0gJCgnPGRpdiAvPicpLmFkZENsYXNzKCdtZWRpYS1wcm9ncmVzcy1sYWJlbCcpO1xuXHRcdHRoaXMuJGJhciA9ICQoJzxkaXYgLz4nKTtcblx0XHR0aGlzLiRlbFxuXHRcdFx0LmFwcGVuZCggdGhpcy4kbGFiZWwgKTtcblx0XHR0aGlzLiRwcm9ncmVzc1xuXHRcdFx0LmFwcGVuZCggdGhpcy4kYmFyIClcblx0XHRcdC5hcHBlbmRUbyggdGhpcy4kZWwgKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRMYWJlbDpmdW5jdGlvbihsYWJlbCkge1xuXHRcdHRoaXMuJGxhYmVsLnRleHQobGFiZWwpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRQcm9ncmVzczpmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR0aGlzLiRiYXIud2lkdGgoICggcGVyY2VudCApKyclJyk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0pO1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBOb3RpY2UgZnJvbSAnbm90aWNlLmpzJztcbmltcG9ydCBQYXN0ZWJvYXJkIGZyb20gJ3Bhc3RlYm9hcmQuanMnO1xuaW1wb3J0IFByb2dyZXNzIGZyb20gJ3Byb2dyZXNzLmpzJztcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oIG9wdCApIHtcblxuXHRcdHRoaXMuZmllbGQgPSBvcHQuZmllbGQ7XG5cblx0XHR0aGlzLm5vdGljZSA9IGZhbHNlO1xuXHRcdHRoaXMucHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHR0aGlzLnVwbG9hZGVyID0gbmV3IHdwLm1lZGlhLnZpZXcuVXBsb2FkZXJXaW5kb3coe1xuXHRcdFx0Y29udHJvbGxlcjogdGhpcyxcblx0XHRcdHVwbG9hZGVyOiB7XG5cdFx0XHRcdGRyb3B6b25lOiAgdGhpcy5lbCxcblx0XHRcdFx0Y29udGFpbmVyOiB0aGlzLmVsLFxuXHRcdFx0XHRwYXJhbXM6IHtcblx0XHRcdFx0XHRfYWNmdXBsb2FkZXI6IHRoaXMuZmllbGQuZ2V0KCdrZXknKSxcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5wYXN0ZWJvYXJkID0gbmV3IFBhc3RlYm9hcmQoe1xuXHRcdFx0Y29udHJvbGxlcjogdGhpcyxcblx0XHRcdGVsOiB0aGlzLiRlbC5pcygnW2RhdGEtdXBsb2FkZXI9XCJ3cFwiXScpID8gdGhpcy5lbCA6IHRoaXMuZmllbGQuJCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJykuZ2V0KDApXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0cmVuZGVyOmZ1bmN0aW9uKCkge1xuXHRcdCQoIHRoaXMudXBsb2FkZXIucmVuZGVyKCkuZWwgKS5hcHBlbmRUbyggdGhpcy5lbCApO1xuXG5cdFx0dGhpcy5wYXN0ZWJvYXJkLnJlbmRlcigpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdHJlYWR5OiBmdW5jdGlvbigpIHtcblx0XHRjb25zdCBzZWxmID0gdGhpcztcblx0XHR0aGlzLiRlbFxuXHRcdC5vbignZHJvcCBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyYWdvdmVyJyxmdW5jdGlvbihlKXtcblx0XHRcdC8vIHByZXZlbnQgYmxvY2sgZWRpdG9yIGZpbGUgZHJvcFxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXHRcdH0pXG5cdFx0Lm9uKCdkcm9wJyxmdW5jdGlvbihlKXtcblx0XHRcdC8vIHJlc2V0IGVycm9yXG5cdFx0XHRzZWxmLnJlbW92ZU5vdGljZSgpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy50cmlnZ2VyKCdhY3RpdmF0ZScpXG5cdFx0dGhpcy51cGxvYWRlci5yZWFkeSgpO1xuXHRcdC8vXG5cdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdGaWxlc0FkZGVkJywgdGhpcy5maWxlc0FkZGVkLCB0aGlzICk7XG5cdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdCZWZvcmVVcGxvYWQnLCB0aGlzLmZpbGVCZWZvcmVVcGxvYWQsIHRoaXMgKTtcblx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ1VwbG9hZFByb2dyZXNzJywgdGhpcy5maWxlVXBsb2FkUHJvZ3Jlc3MsIHRoaXMgKTtcblx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0ZpbGVVcGxvYWRlZCcsIHRoaXMuZmlsZVVwbG9hZGVkLCB0aGlzICk7XG5cdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdlcnJvcicsIHRoaXMuZmlsZVVwbG9hZEVycm9yLCB0aGlzICk7XG5cdFx0dGhpcy5wYXN0ZWJvYXJkLnJlbmRlcigpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRmaWxlc0FkZGVkOiBmdW5jdGlvbiggdXBsb2FkZXIsIGZpbGVzICkge1xuXHRcdC8vXG5cdFx0dGhpcy50b3RhbCA9IGZpbGVzLmxlbmd0aDtcblx0XHR0aGlzLmRvbmUgPSAwO1xuXHRcdC8vX2FjZnVwbG9hZGVyXG5cdFx0Ly90aGlzLm5vdGljZSA9IGZhbHNlO1xuXHR9LFxuXHRmaWxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiggdXBsb2FkZXIsIGZpbGUgKSB7XG5cdFx0dGhpcy5hZGRQcm9ncmVzcygpO1xuXHRcdHRoaXMucHJvZ3Jlc3Muc2V0TGFiZWwoIF8uZXNjYXBlKGZpbGUubmFtZSkgKTtcblx0fSxcblx0ZmlsZVVwbG9hZFByb2dyZXNzOmZ1bmN0aW9uKCB1cGxvYWRlciwgZmlsZSApIHtcblx0XHR0aGlzLmFkZFByb2dyZXNzKCk7XG5cdFx0dGhpcy5wcm9ncmVzcy5zZXRQcm9ncmVzcyggKCAxMDAgKiB0aGlzLmRvbmUgKyBmaWxlLnBlcmNlbnQgKSAvIHRoaXMudG90YWwgKTtcblx0fSxcblx0ZmlsZVVwbG9hZGVkOmZ1bmN0aW9uKCB1cGxvYWRlciwgZmlsZSwgcmVzcG9uc2UgKSB7XG5cdFx0bGV0IHJlc3VsdDtcblx0XHR0aGlzLmZpbGUgPSBmaWxlO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2FjZi1kcm9wem9uZS11cGxvYWRlZCcsZmlsZS5hdHRhY2htZW50LHRoaXMuZG9uZSk7XG5cdFx0XHR0aGlzLmRvbmUrKztcblx0XHRcdGlmICh0aGlzLnRvdGFsID09PSB0aGlzLmRvbmUgKSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlUHJvZ3Jlc3MoKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoKCBlcnIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXN1bHQgPSBKU09OLnBhcnNlKCByZXNwb25zZS5yZXNwb25zZSApO1xuXHRcdFx0XHR0aGlzLmZpbGVVcGxvYWRFcnJvciggdXBsb2FkZXIsIHtcblx0XHRcdFx0XHRmaWxlOiB0aGlzLmZpbGUsXG5cdFx0XHRcdFx0bWVzc2FnZTogcmVzdWx0LmRhdGEubWVzc2FnZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKCBlcnIyICkge1xuXHRcdFx0XHR0aGlzLmZpbGVVcGxvYWRFcnJvciggdXBsb2FkZXIsIHtcblx0XHRcdFx0XHRmaWxlOiB0aGlzLmZpbGUsXG5cdFx0XHRcdFx0bWVzc2FnZTogcmVzcG9uc2UucmVzcG9uc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRmaWxlVXBsb2FkRXJyb3I6ZnVuY3Rpb24oIHVwbG9hZGVyLCBlcnJvciApIHtcblx0XHR0aGlzLmRvbmUrKztcblx0XHRpZiAodGhpcy50b3RhbCA9PT0gdGhpcy5kb25lICkge1xuXHRcdFx0dGhpcy5yZW1vdmVQcm9ncmVzcygpO1xuXHRcdH1cblx0XHR0aGlzLnRyaWdnZXIoICdhY2YtZHJvcHpvbmUtZXJyb3InLCBlcnJvciApO1xuXG5cdFx0dGhpcy5hZGROb3RpY2Uoe1xuXHRcdFx0dHlwZTonZXJyb3InLFxuXHRcdFx0Ym9sZDogXy5lc2NhcGUoZXJyb3IuZmlsZS5uYW1lKSxcblx0XHRcdG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2Vcblx0XHR9KTtcblx0fSxcblx0YWRkUHJvZ3Jlc3M6ZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB0aGlzLnByb2dyZXNzICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdHRoaXMucHJvZ3Jlc3MgPSBuZXcgUHJvZ3Jlc3MoKTtcblx0XHR0aGlzLnByb2dyZXNzLnJlbmRlcigpLiRlbC5wcmVwZW5kVG8odGhpcy5lbCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdHJlbW92ZVByb2dyZXNzOmZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdGlmICggISB0aGlzLnByb2dyZXNzICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0dGhpcy5wcm9ncmVzcy4kZWwucmVtb3ZlKCk7XG5cdFx0dGhpcy5wcm9ncmVzcyA9IGZhbHNlO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRhZGROb3RpY2U6ZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHRoaXMubm90aWNlID0gbmV3IE5vdGljZShvcHRpb25zKTtcblx0XHR0aGlzLm5vdGljZS5yZW5kZXIoKTtcblx0XHR0aGlzLm5vdGljZS4kZWwucHJlcGVuZFRvKHRoaXMuZWwpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRyZW1vdmVOb3RpY2U6ZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdGlmICggISEgdGhpcy5ub3RpY2UgKSB7XG5cdFx0XHR0aGlzLm5vdGljZS5yZW1vdmUoKTtcblx0XHRcdHRoaXMubm90aWNlID0gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59KTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgVXBsb2FkZXJJbmZvIGZyb20gJ3VwbG9hZGVyLWluZm8uanMnO1xuaW1wb3J0IEFDRkRyb3B6b25lIGZyb20gJ2FjZi1kcm9wem9uZS5qcyc7XG5cblxuXG5jb25zdCBpbml0RmlsZURyb3B6b25lID0gZmllbGQgPT4ge1xuXHRsZXQgZWwsXG5cdFx0cGFyZW50LFxuXHRcdGluZm8sXG5cdFx0ZHJvcHpvbmU7XG5cblx0aWYgKCAhIGZpZWxkLiRlbC5pcygnLmRyb3B6b25lJykgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0cGFyZW50ID0gZmllbGQucGFyZW50KCk7XG5cblx0ZWwgPSBmaWVsZC4kKCdbZGF0YS11cGxvYWRlcj1cIndwXCJdJykuZ2V0KDApXG5cblx0aWYgKCAhIGVsICkge1xuXHRcdHJldHVybjtcblx0fVxuXHQvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTcxMDc2L3JlbW92ZS10ZXh0LXdpdGgtanF1ZXJ5XG5cdGZpZWxkLiQoJy5oaWRlLWlmLXZhbHVlPnAnKVxuXHRcdC5jb250ZW50cygpXG5cdFx0LmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5ub2RlVHlwZSA9PSAzOyAvL05vZGUuVEVYVF9OT0RFXG5cdFx0fSlcblx0XHQucmVtb3ZlKCk7XG5cblx0aW5mbyA9IG5ldyBVcGxvYWRlckluZm8oe29yOnRydWV9KTtcblx0aW5mby5yZW5kZXIoKTtcblx0aW5mby4kZWwucHJlcGVuZFRvKCBmaWVsZC4kKCcuaGlkZS1pZi12YWx1ZScpICk7XG5cblxuXHRkcm9wem9uZSA9IG5ldyBBQ0ZEcm9wem9uZSh7XG5cdFx0ZWw6IGVsLFxuXHRcdGZpZWxkOiBmaWVsZFxuXHR9KTtcblx0ZHJvcHpvbmUucmVuZGVyKCk7XG5cdGRyb3B6b25lLnJlYWR5KCk7XG5cdGRyb3B6b25lLm9uKCdhY2YtZHJvcHpvbmUtdXBsb2FkZWQnLCAoIGF0dGFjaG1lbnQsIGkgKSA9PiB7XG5cdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LmdldCgndHlwZScpID09PSAncmVwZWF0ZXInICYmIGkgPiAwICkge1xuXHRcdFx0ZmllbGQuYXBwZW5kKCBhdHRhY2htZW50LCBwYXJlbnQgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZmllbGQucmVuZGVyKGF0dGFjaG1lbnQpO1xuXHRcdH1cblx0fSk7XG59XG5jb25zdCBpbml0R2FsbGVyeURyb3B6b25lID0gZmllbGQgPT4ge1xuXG5cdGxldCBkcm9wem9uZSxcblx0XHRpbmZvLFxuXHRcdGVsID0gZmllbGQuJCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJykuZ2V0KDApO1xuXG5cdGlmICggISBmaWVsZC4kZWwuaXMoJy5kcm9wem9uZScpICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGluZm8gPSBuZXcgVXBsb2FkZXJJbmZvKHtvcjpmYWxzZX0pO1xuXHRpbmZvLnJlbmRlcigpO1xuXHRpbmZvLiRlbC5wcmVwZW5kVG8oIGVsICk7XG5cblx0ZHJvcHpvbmUgPSBuZXcgQUNGRHJvcHpvbmUoe1xuXHRcdGVsOiBlbCxcblx0XHRmaWVsZDogZmllbGRcblx0fSk7XG5cdGRyb3B6b25lLnJlbmRlcigpO1xuXHRkcm9wem9uZS5yZWFkeSgpO1xuXHRkcm9wem9uZS5vbignYWNmLWRyb3B6b25lLXVwbG9hZGVkJywgYXR0YWNobWVudCA9PiB7XG5cblx0XHRmaWVsZC5hcHBlbmRBdHRhY2htZW50KFxuXHRcdFx0YXR0YWNobWVudCxcblx0XHRcdGZpZWxkLmdldCgnaW5zZXJ0JykgPT09ICdwcmVwZW5kJyA/IDAgOiB1bmRlZmluZWRcblx0XHQpO1xuXG5cdH0pO1xufVxuXG5cbmFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWltYWdlJywgICBpbml0RmlsZURyb3B6b25lICk7XG5hY2YuYWRkQWN0aW9uKCAncmVhZHlfZmllbGQvdHlwZT1maWxlJywgICAgaW5pdEZpbGVEcm9wem9uZSApO1xuYWNmLmFkZEFjdGlvbiggJ3JlYWR5X2ZpZWxkL3R5cGU9Z2FsbGVyeScsIGluaXRHYWxsZXJ5RHJvcHpvbmUgKTtcblxuLy8gY3JlYXRlZCBmcm9tIHJlcGVhdGVyXG5hY2YuYWRkQWN0aW9uKCAnYXBwZW5kX2ZpZWxkL3R5cGU9aW1hZ2UnLCAgIGluaXRGaWxlRHJvcHpvbmUgKTtcbmFjZi5hZGRBY3Rpb24oICdhcHBlbmRfZmllbGQvdHlwZT1maWxlJywgICAgaW5pdEZpbGVEcm9wem9uZSApO1xuYWNmLmFkZEFjdGlvbiggJ2FwcGVuZF9maWVsZC90eXBlPWdhbGxlcnknLCBpbml0R2FsbGVyeURyb3B6b25lICk7XG4iXX0=