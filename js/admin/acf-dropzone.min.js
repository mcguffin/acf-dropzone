!function(e,t){var i=Backbone.View.extend({tagName:"div",className:"media-progress-bar-box",render:function(){return this.$progress=e("<div />").addClass("media-progress-bar"),this.$label=e("<div />").addClass("media-progress-label"),this.$bar=e("<div />"),this.$el.append(this.$label),this.$progress.append(this.$bar).appendTo(this.$el),this},setLabel:function(e){this.$label.text(e)},setProgress:function(e){return this.$bar.width(e+"%"),this}}),r=wp.media.View.extend({template:wp.template("acf-dropzone-notice"),className:"notice is-dismissible",events:{"click .notice-dismiss":"remove"},render:function(){wp.media.View.prototype.render.apply(this,arguments),this.$el.addClass(this.options.type)}}),s=Backbone.View.extend({initialize:function(){return this.notice=!1,this.progress=!1,this.uploader=new wp.media.view.UploaderWindow({controller:this,uploader:{dropzone:this.el,container:this.el}}),this},render:function(){return e(this.uploader.render().el).appendTo(this.el),this},ready:function(){return this.trigger("activate"),this.uploader.ready(),this.uploader.uploader.uploader.bind("FilesAdded",this.filesAdded,this),this.uploader.uploader.uploader.bind("BeforeUpload",this.fileBeforeUpload,this),this.uploader.uploader.uploader.bind("UploadProgress",this.fileUploadProgress,this),this.uploader.uploader.uploader.bind("FileUploaded",this.fileUploaded,this),this.uploader.uploader.uploader.bind("error",this.fileUploadError,this),this},filesAdded:function(e,i){this.total=i.length,this.done=0},fileBeforeUpload:function(e,i){this.notice&&this.notice.remove(),this.addProgress(),this.progress.setLabel(_.escape(i.name)),this.notice=!1},fileUploadProgress:function(e,i){this.addProgress(),this.progress.setProgress((100*this.done+i.percent)/this.total)},fileUploaded:function(e,i,t){this.done++,this.file=i,this.removeProgress(),this.trigger("acf-dropzone-uploaded",i.attachment)},fileUploadError:function(e,i){this.done++,this.removeProgress(),this.trigger("acf-dropzone-error",i),this.notice=new r({type:"error",bold:_.escape(i.file.name),message:i.message}),this.notice.render(),this.notice.$el.prependTo(this.el),this.total--},addProgress:function(){if(this.progress)return this;this.progress=new i,this.progress.render().$el.appendTo(this.el)},removeProgress:function(e){return this.progress&&(this.progress.$el.remove(),this.progress=!1),this}});function o(i){var e=i.$('[data-uploader="wp"]').get(0);i=i;(t=new s({el:e})).render(),t.ready(),t.on("acf-dropzone-uploaded",function(e){i.render(e)})}function d(i){var e=i.$(".acf-gallery-main").get(0);i=i;(t=new s({el:e})).render(),t.ready(),t.on("acf-dropzone-uploaded",function(e){i.appendAttachment(e,"prepend"===i.get("insert")?0:void 0)})}acf.addAction("ready_field/type=image",o),acf.addAction("ready_field/type=file",o),acf.addAction("ready_field/type=gallery",d),acf.addAction("append_field/type=image",o),acf.addAction("append_field/type=file",o),acf.addAction("append_field/type=gallery",d)}(jQuery,acf_dropzone);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1kcm9wem9uZS5qcyJdLCJuYW1lcyI6WyIkIiwiZHJvcHpvbmUiLCJQcm9ncmVzcyIsIkJhY2tib25lIiwiVmlldyIsImV4dGVuZCIsInRhZ05hbWUiLCJjbGFzc05hbWUiLCJyZW5kZXIiLCJ0aGlzIiwiJHByb2dyZXNzIiwiYWRkQ2xhc3MiLCIkbGFiZWwiLCIkYmFyIiwiJGVsIiwiYXBwZW5kIiwiYXBwZW5kVG8iLCJzZXRMYWJlbCIsImxhYmVsIiwidGV4dCIsInNldFByb2dyZXNzIiwicGVyY2VudCIsIndpZHRoIiwiTm90aWNlIiwid3AiLCJtZWRpYSIsInRlbXBsYXRlIiwiZXZlbnRzIiwiY2xpY2sgLm5vdGljZS1kaXNtaXNzIiwicHJvdG90eXBlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvcHRpb25zIiwidHlwZSIsIkFDRkRyb3B6b25lIiwiaW5pdGlhbGl6ZSIsIm5vdGljZSIsInByb2dyZXNzIiwidXBsb2FkZXIiLCJ2aWV3IiwiVXBsb2FkZXJXaW5kb3ciLCJjb250cm9sbGVyIiwiZWwiLCJjb250YWluZXIiLCJyZWFkeSIsInRyaWdnZXIiLCJiaW5kIiwiZmlsZXNBZGRlZCIsImZpbGVCZWZvcmVVcGxvYWQiLCJmaWxlVXBsb2FkUHJvZ3Jlc3MiLCJmaWxlVXBsb2FkZWQiLCJmaWxlVXBsb2FkRXJyb3IiLCJmaWxlcyIsInRvdGFsIiwibGVuZ3RoIiwiZG9uZSIsImZpbGUiLCJyZW1vdmUiLCJhZGRQcm9ncmVzcyIsIl8iLCJlc2NhcGUiLCJuYW1lIiwicmVzcG9uc2UiLCJyZW1vdmVQcm9ncmVzcyIsImF0dGFjaG1lbnQiLCJlcnJvciIsImJvbGQiLCJtZXNzYWdlIiwicHJlcGVuZFRvIiwiaW5pdEZpbGVEcm9wem9uZSIsImZpZWxkIiwiZ2V0Iiwib24iLCJpbml0R2FsbGVyeURyb3B6b25lIiwiYXBwZW5kQXR0YWNobWVudCIsInVuZGVmaW5lZCIsImFjZiIsImFkZEFjdGlvbiIsImpRdWVyeSIsImFjZl9kcm9wem9uZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsR0F1QmIsSUFBSUMsRUFBV0MsU0FBU0MsS0FBS0MsT0FBTyxDQUNuQ0MsUUFBVyxNQUNYQyxVQUFXLHlCQUNYQyxPQUFPLFdBVU4sT0FUQUMsS0FBS0MsVUFBWVYsRUFBRSxXQUFXVyxTQUFTLHNCQUN2Q0YsS0FBS0csT0FBU1osRUFBRSxXQUFXVyxTQUFTLHdCQUNwQ0YsS0FBS0ksS0FBT2IsRUFBRSxXQUNkUyxLQUFLSyxJQUNIQyxPQUFRTixLQUFLRyxRQUNmSCxLQUFLQyxVQUNISyxPQUFRTixLQUFLSSxNQUNiRyxTQUFVUCxLQUFLSyxLQUVWTCxNQUVSUSxTQUFTLFNBQVNDLEdBQ2pCVCxLQUFLRyxPQUFPTyxLQUFLRCxJQUVsQkUsWUFBWSxTQUFVQyxHQUVyQixPQURBWixLQUFLSSxLQUFLUyxNQUFPLEVBQVksS0FDdEJiLFFBR0xjLEVBQVNDLEdBQUdDLE1BQU1yQixLQUFLQyxPQUFPLENBQ2pDcUIsU0FBU0YsR0FBR0UsU0FBUyx1QkFDckJuQixVQUFVLHdCQUNWb0IsT0FBTyxDQUNOQyx3QkFBMEIsVUFFM0JwQixPQUFPLFdBQ05nQixHQUFHQyxNQUFNckIsS0FBS3lCLFVBQVVyQixPQUFPc0IsTUFBTXJCLEtBQUtzQixXQUUxQ3RCLEtBQUtLLElBQUlILFNBQVNGLEtBQUt1QixRQUFRQyxTQUs3QkMsRUFBYy9CLFNBQVNDLEtBQUtDLE9BQU8sQ0FDdEM4QixXQUFZLFdBV1gsT0FWQTFCLEtBQUsyQixRQUFTLEVBQ2QzQixLQUFLNEIsVUFBVyxFQUNoQjVCLEtBQUs2QixTQUFXLElBQUlkLEdBQUdDLE1BQU1jLEtBQUtDLGVBQWUsQ0FDaERDLFdBQVloQyxLQUNaNkIsU0FBVSxDQUNUckMsU0FBV1EsS0FBS2lDLEdBQ2hCQyxVQUFXbEMsS0FBS2lDLE1BSVhqQyxNQUVSRCxPQUFPLFdBRU4sT0FEQVIsRUFBRVMsS0FBSzZCLFNBQVM5QixTQUFTa0MsSUFBSTFCLFNBQVVQLEtBQUtpQyxJQUNyQ2pDLE1BRVJtQyxNQUFPLFdBVU4sT0FUQW5DLEtBQUtvQyxRQUFRLFlBQ2JwQyxLQUFLNkIsU0FBU00sUUFFZG5DLEtBQUs2QixTQUFTQSxTQUFTQSxTQUFTUSxLQUFLLGFBQWNyQyxLQUFLc0MsV0FBWXRDLE1BQ3BFQSxLQUFLNkIsU0FBU0EsU0FBU0EsU0FBU1EsS0FBSyxlQUFnQnJDLEtBQUt1QyxpQkFBa0J2QyxNQUM1RUEsS0FBSzZCLFNBQVNBLFNBQVNBLFNBQVNRLEtBQUssaUJBQWtCckMsS0FBS3dDLG1CQUFvQnhDLE1BQ2hGQSxLQUFLNkIsU0FBU0EsU0FBU0EsU0FBU1EsS0FBSyxlQUFnQnJDLEtBQUt5QyxhQUFjekMsTUFDeEVBLEtBQUs2QixTQUFTQSxTQUFTQSxTQUFTUSxLQUFLLFFBQVNyQyxLQUFLMEMsZ0JBQWlCMUMsTUFFN0RBLE1BRVJzQyxXQUFZLFNBQVVULEVBQVVjLEdBQy9CM0MsS0FBSzRDLE1BQVFELEVBQU1FLE9BQ25CN0MsS0FBSzhDLEtBQU8sR0FFYlAsaUJBQWtCLFNBQVVWLEVBQVVrQixHQUNsQy9DLEtBQUsyQixRQUFVM0IsS0FBSzJCLE9BQU9xQixTQUM5QmhELEtBQUtpRCxjQUNMakQsS0FBSzRCLFNBQVNwQixTQUFVMEMsRUFBRUMsT0FBT0osRUFBS0ssT0FDdENwRCxLQUFLMkIsUUFBUyxHQUVmYSxtQkFBbUIsU0FBVVgsRUFBVWtCLEdBQ3RDL0MsS0FBS2lELGNBQ0xqRCxLQUFLNEIsU0FBU2pCLGFBQWUsSUFBTVgsS0FBSzhDLEtBQU9DLEVBQUtuQyxTQUFZWixLQUFLNEMsUUFFdEVILGFBQWEsU0FBVVosRUFBVWtCLEVBQU1NLEdBQ3RDckQsS0FBSzhDLE9BQ0w5QyxLQUFLK0MsS0FBT0EsRUFDWi9DLEtBQUtzRCxpQkFDTHRELEtBQUtvQyxRQUFRLHdCQUF3QlcsRUFBS1EsYUFFM0NiLGdCQUFnQixTQUFVYixFQUFVMkIsR0FDbkN4RCxLQUFLOEMsT0FDTDlDLEtBQUtzRCxpQkFDTHRELEtBQUtvQyxRQUFTLHFCQUFzQm9CLEdBRXBDeEQsS0FBSzJCLE9BQVMsSUFBSWIsRUFBTyxDQUN4QlUsS0FBSyxRQUNMaUMsS0FBTVAsRUFBRUMsT0FBT0ssRUFBTVQsS0FBS0ssTUFDMUJNLFFBQVNGLEVBQU1FLFVBRWhCMUQsS0FBSzJCLE9BQU81QixTQUNaQyxLQUFLMkIsT0FBT3RCLElBQUlzRCxVQUFVM0QsS0FBS2lDLElBQy9CakMsS0FBSzRDLFNBR05LLFlBQVksV0FDWCxHQUFLakQsS0FBSzRCLFNBQ1QsT0FBTzVCLEtBRVJBLEtBQUs0QixTQUFXLElBQUluQyxFQUNwQk8sS0FBSzRCLFNBQVM3QixTQUFTTSxJQUFJRSxTQUFTUCxLQUFLaUMsS0FFMUNxQixlQUFlLFNBQVUxQyxHQUN4QixPQUFPWixLQUFLNEIsV0FJWjVCLEtBQUs0QixTQUFTdkIsSUFBSTJDLFNBQ2xCaEQsS0FBSzRCLFVBQVcsR0FDVDVCLFFBYVQsU0FBUzRELEVBQWtCQyxHQUMxQixJQUFJNUIsRUFBSzRCLEVBQU10RSxFQUFFLHdCQUF3QnVFLElBQUksR0FDNUNELEVBQVFBLEdBRVRyRSxFQUFXLElBQUlpQyxFQUFZLENBQzFCUSxHQUFJQSxLQUVJbEMsU0FDVFAsRUFBUzJDLFFBQ1QzQyxFQUFTdUUsR0FBRyx3QkFBeUIsU0FBVVIsR0FDOUNNLEVBQU05RCxPQUFPd0QsS0FJZixTQUFTUyxFQUFxQkgsR0FDN0IsSUFBSTVCLEVBQUs0QixFQUFNdEUsRUFBRSxxQkFBcUJ1RSxJQUFJLEdBQ3pDRCxFQUFRQSxHQUNUckUsRUFBVyxJQUFJaUMsRUFBWSxDQUMxQlEsR0FBSUEsS0FFSWxDLFNBQ1RQLEVBQVMyQyxRQUNUM0MsRUFBU3VFLEdBQUcsd0JBQXlCLFNBQVVSLEdBRTlDTSxFQUFNSSxpQkFDTFYsRUFDd0IsWUFBeEJNLEVBQU1DLElBQUksVUFBMEIsT0FBSUksS0FPM0NDLElBQUlDLFVBQVcseUJBQTRCUixHQUMzQ08sSUFBSUMsVUFBVyx3QkFBNEJSLEdBQzNDTyxJQUFJQyxVQUFXLDJCQUE0QkosR0FHM0NHLElBQUlDLFVBQVcsMEJBQTZCUixHQUM1Q08sSUFBSUMsVUFBVyx5QkFBNkJSLEdBQzVDTyxJQUFJQyxVQUFXLDRCQUE2QkosR0FoTTdDLENBbU1HSyxPQUFRQyIsImZpbGUiOiJhY2YtZHJvcHpvbmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCAkLCBkcm9wem9uZSApe1xuXHQvL1xuXHQvLyBkcm9wem9uZS5Ecm9wbG9hZGVyID0gd3AuVXBsb2FkZXIuZXh0ZW5kKHtcblx0Ly8gXHRpbml0OiAgICAgZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly8gXHRlcnJvcjogICAgZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly8gXHRzdWNjZXNzOiAgZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly8gXHRhZGRlZDogICAgZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly8gXHRwcm9ncmVzczogZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly8gXHRjb21wbGV0ZTogZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0Y29uc29sZS5sb2coZSk7XG5cdC8vIFx0fSxcblx0Ly9cblx0Ly8gfSk7XG5cdHZhciBQcm9ncmVzcyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblx0XHR0YWdOYW1lOiAgICdkaXYnLFxuXHRcdGNsYXNzTmFtZTogJ21lZGlhLXByb2dyZXNzLWJhci1ib3gnLFxuXHRcdHJlbmRlcjpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJHByb2dyZXNzID0gJCgnPGRpdiAvPicpLmFkZENsYXNzKCdtZWRpYS1wcm9ncmVzcy1iYXInKTtcblx0XHRcdHRoaXMuJGxhYmVsID0gJCgnPGRpdiAvPicpLmFkZENsYXNzKCdtZWRpYS1wcm9ncmVzcy1sYWJlbCcpO1xuXHRcdFx0dGhpcy4kYmFyID0gJCgnPGRpdiAvPicpO1xuXHRcdFx0dGhpcy4kZWxcblx0XHRcdFx0LmFwcGVuZCggdGhpcy4kbGFiZWwgKTtcblx0XHRcdHRoaXMuJHByb2dyZXNzXG5cdFx0XHRcdC5hcHBlbmQoIHRoaXMuJGJhciApXG5cdFx0XHRcdC5hcHBlbmRUbyggdGhpcy4kZWwgKTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzZXRMYWJlbDpmdW5jdGlvbihsYWJlbCkge1xuXHRcdFx0dGhpcy4kbGFiZWwudGV4dChsYWJlbCk7XG5cdFx0fSxcblx0XHRzZXRQcm9ncmVzczpmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHRcdHRoaXMuJGJhci53aWR0aCggKCBwZXJjZW50ICkrJyUnKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fSk7XG5cdHZhciBOb3RpY2UgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG5cdFx0dGVtcGxhdGU6d3AudGVtcGxhdGUoJ2FjZi1kcm9wem9uZS1ub3RpY2UnKSxcblx0XHRjbGFzc05hbWU6J25vdGljZSBpcy1kaXNtaXNzaWJsZScsXG5cdFx0ZXZlbnRzOntcblx0XHRcdCdjbGljayAubm90aWNlLWRpc21pc3MnIDogJ3JlbW92ZScsXG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKSB7XG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLiRlbC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudHlwZSk7XG5cdFx0fVxuXHR9KVxuXG5cblx0dmFyIEFDRkRyb3B6b25lID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5ub3RpY2UgPSBmYWxzZTtcblx0XHRcdHRoaXMucHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdHRoaXMudXBsb2FkZXIgPSBuZXcgd3AubWVkaWEudmlldy5VcGxvYWRlcldpbmRvdyh7XG5cdFx0XHRcdGNvbnRyb2xsZXI6IHRoaXMsXG5cdFx0XHRcdHVwbG9hZGVyOiB7XG5cdFx0XHRcdFx0ZHJvcHpvbmU6ICB0aGlzLmVsLFxuXHRcdFx0XHRcdGNvbnRhaW5lcjogdGhpcy5lbCxcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0cmVuZGVyOmZ1bmN0aW9uKCkge1xuXHRcdFx0JCh0aGlzLnVwbG9hZGVyLnJlbmRlcigpLmVsKS5hcHBlbmRUbyggdGhpcy5lbCApO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2FjdGl2YXRlJylcblx0XHRcdHRoaXMudXBsb2FkZXIucmVhZHkoKTtcblx0XHRcdC8vXG5cdFx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0ZpbGVzQWRkZWQnLCB0aGlzLmZpbGVzQWRkZWQsIHRoaXMgKTtcblx0XHRcdHRoaXMudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnQmVmb3JlVXBsb2FkJywgdGhpcy5maWxlQmVmb3JlVXBsb2FkLCB0aGlzICk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ1VwbG9hZFByb2dyZXNzJywgdGhpcy5maWxlVXBsb2FkUHJvZ3Jlc3MsIHRoaXMgKTtcblx0XHRcdHRoaXMudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnRmlsZVVwbG9hZGVkJywgdGhpcy5maWxlVXBsb2FkZWQsIHRoaXMgKTtcblx0XHRcdHRoaXMudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnZXJyb3InLCB0aGlzLmZpbGVVcGxvYWRFcnJvciwgdGhpcyApO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGZpbGVzQWRkZWQ6IGZ1bmN0aW9uKCB1cGxvYWRlciwgZmlsZXMgKSB7XG5cdFx0XHR0aGlzLnRvdGFsID0gZmlsZXMubGVuZ3RoO1xuXHRcdFx0dGhpcy5kb25lID0gMDtcblx0XHR9LFxuXHRcdGZpbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uKCB1cGxvYWRlciwgZmlsZSApIHtcblx0XHRcdCEhIHRoaXMubm90aWNlICYmIHRoaXMubm90aWNlLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5hZGRQcm9ncmVzcygpO1xuXHRcdFx0dGhpcy5wcm9ncmVzcy5zZXRMYWJlbCggXy5lc2NhcGUoZmlsZS5uYW1lKSApO1xuXHRcdFx0dGhpcy5ub3RpY2UgPSBmYWxzZTtcblx0XHR9LFxuXHRcdGZpbGVVcGxvYWRQcm9ncmVzczpmdW5jdGlvbiggdXBsb2FkZXIsIGZpbGUgKSB7XG5cdFx0XHR0aGlzLmFkZFByb2dyZXNzKCk7XG5cdFx0XHR0aGlzLnByb2dyZXNzLnNldFByb2dyZXNzKCAoIDEwMCAqIHRoaXMuZG9uZSArIGZpbGUucGVyY2VudCApIC8gdGhpcy50b3RhbCApO1xuXHRcdH0sXG5cdFx0ZmlsZVVwbG9hZGVkOmZ1bmN0aW9uKCB1cGxvYWRlciwgZmlsZSwgcmVzcG9uc2UgKSB7XG5cdFx0XHR0aGlzLmRvbmUrKztcblx0XHRcdHRoaXMuZmlsZSA9IGZpbGU7XG5cdFx0XHR0aGlzLnJlbW92ZVByb2dyZXNzKCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2FjZi1kcm9wem9uZS11cGxvYWRlZCcsZmlsZS5hdHRhY2htZW50KTtcblx0XHR9LFxuXHRcdGZpbGVVcGxvYWRFcnJvcjpmdW5jdGlvbiggdXBsb2FkZXIsIGVycm9yICkge1xuXHRcdFx0dGhpcy5kb25lKys7XG5cdFx0XHR0aGlzLnJlbW92ZVByb2dyZXNzKCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY2YtZHJvcHpvbmUtZXJyb3InLCBlcnJvciApO1xuXG5cdFx0XHR0aGlzLm5vdGljZSA9IG5ldyBOb3RpY2Uoe1xuXHRcdFx0XHR0eXBlOidlcnJvcicsXG5cdFx0XHRcdGJvbGQ6IF8uZXNjYXBlKGVycm9yLmZpbGUubmFtZSksXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2Vcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5ub3RpY2UucmVuZGVyKCk7XG5cdFx0XHR0aGlzLm5vdGljZS4kZWwucHJlcGVuZFRvKHRoaXMuZWwpO1xuXHRcdFx0dGhpcy50b3RhbC0tO1xuXHRcdH0sXG5cblx0XHRhZGRQcm9ncmVzczpmdW5jdGlvbigpIHtcblx0XHRcdGlmICggdGhpcy5wcm9ncmVzcyApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnByb2dyZXNzID0gbmV3IFByb2dyZXNzKCk7XG5cdFx0XHR0aGlzLnByb2dyZXNzLnJlbmRlcigpLiRlbC5hcHBlbmRUbyh0aGlzLmVsKTtcblx0XHR9LFxuXHRcdHJlbW92ZVByb2dyZXNzOmZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdFx0aWYgKCAhIHRoaXMucHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnByb2dyZXNzLiRlbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMucHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdH0pO1xuLypcbjxkaXYgaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJub3RpY2UgaXMtZGlzbWlzc2libGVcIj5cblx0PHA+bXNnPC9wPlxuXHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm5vdGljZS1kaXNtaXNzXCI+XG5cdFx0PHNwYW4gY2xhc3M9XCJzY3JlZW4tcmVhZGVyLXRleHRcIj5EaXNtaXNzIHRoaXMgbm90aWNlLjwvc3Bhbj5cblx0PC9idXR0b24+XG48L2Rpdj5cbiovXG5cblxuXHRmdW5jdGlvbiBpbml0RmlsZURyb3B6b25lKCBmaWVsZCApIHtcblx0XHR2YXIgZWwgPSBmaWVsZC4kKCdbZGF0YS11cGxvYWRlcj1cIndwXCJdJykuZ2V0KDApLFxuXHRcdFx0ZmllbGQgPSBmaWVsZDtcblxuXHRcdGRyb3B6b25lID0gbmV3IEFDRkRyb3B6b25lKHtcblx0XHRcdGVsOiBlbCxcblx0XHR9KTtcblx0XHRkcm9wem9uZS5yZW5kZXIoKTtcblx0XHRkcm9wem9uZS5yZWFkeSgpO1xuXHRcdGRyb3B6b25lLm9uKCdhY2YtZHJvcHpvbmUtdXBsb2FkZWQnLCBmdW5jdGlvbiggYXR0YWNobWVudCApe1xuXHRcdFx0ZmllbGQucmVuZGVyKGF0dGFjaG1lbnQpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdEdhbGxlcnlEcm9wem9uZSggZmllbGQgKSB7XG5cdFx0dmFyIGVsID0gZmllbGQuJCgnLmFjZi1nYWxsZXJ5LW1haW4nKS5nZXQoMCksXG5cdFx0XHRmaWVsZCA9IGZpZWxkO1xuXHRcdGRyb3B6b25lID0gbmV3IEFDRkRyb3B6b25lKHtcblx0XHRcdGVsOiBlbCxcblx0XHR9KTtcblx0XHRkcm9wem9uZS5yZW5kZXIoKTtcblx0XHRkcm9wem9uZS5yZWFkeSgpO1xuXHRcdGRyb3B6b25lLm9uKCdhY2YtZHJvcHpvbmUtdXBsb2FkZWQnLCBmdW5jdGlvbiggYXR0YWNobWVudCApe1xuXG5cdFx0XHRmaWVsZC5hcHBlbmRBdHRhY2htZW50KFxuXHRcdFx0XHRhdHRhY2htZW50LFxuXHRcdFx0XHRmaWVsZC5nZXQoJ2luc2VydCcpID09PSAncHJlcGVuZCcgPyAwIDogdW5kZWZpbmVkXG5cdFx0XHQpO1xuXG5cdFx0fSk7XG5cdH1cblxuXG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWltYWdlJywgICBpbml0RmlsZURyb3B6b25lICk7XG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWZpbGUnLCAgICBpbml0RmlsZURyb3B6b25lICk7XG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWdhbGxlcnknLCBpbml0R2FsbGVyeURyb3B6b25lICk7XG5cblx0Ly8gY3JlYXRlZCBmcm9tIHJlcGVhdGVyXG5cdGFjZi5hZGRBY3Rpb24oICdhcHBlbmRfZmllbGQvdHlwZT1pbWFnZScsICAgaW5pdEZpbGVEcm9wem9uZSApO1xuXHRhY2YuYWRkQWN0aW9uKCAnYXBwZW5kX2ZpZWxkL3R5cGU9ZmlsZScsICAgIGluaXRGaWxlRHJvcHpvbmUgKTtcblx0YWNmLmFkZEFjdGlvbiggJ2FwcGVuZF9maWVsZC90eXBlPWdhbGxlcnknLCBpbml0R2FsbGVyeURyb3B6b25lICk7XG5cblxufSkoalF1ZXJ5LCBhY2ZfZHJvcHpvbmUgKTtcbiJdfQ==
