!function(e,o){var s=wp.media.View.extend({tagName:"div",className:"acf-dropzone-info",template:wp.template("acf-dropzone-info")}),t=Backbone.View.extend({tagName:"div",className:"media-progress-bar-box",render:function(){return this.$progress=e("<div />").addClass("media-progress-bar"),this.$label=e("<div />").addClass("media-progress-label"),this.$bar=e("<div />"),this.$el.append(this.$label),this.$progress.append(this.$bar).appendTo(this.$el),this},setLabel:function(e){this.$label.text(e)},setProgress:function(e){return this.$bar.width(e+"%"),this}}),i=wp.media.View.extend({template:wp.template("acf-dropzone-notice"),className:"notice is-dismissible",events:{"click .notice-dismiss":"remove"},render:function(){wp.media.View.prototype.render.apply(this,arguments),this.$el.addClass(this.options.type)}}),r=Backbone.View.extend({events:{focus:"listenPaste",blur:"stopListenPaste"},listenPaste:function(e){var t=this;this.$el.on("paste",function(){t.onPaste.apply(t,arguments)})},stopListenPaste:function(){this.$el.off("paste")},initialize:function(e){return Backbone.View.prototype.initialize.apply(this,arguments),this.controller=e.controller,this},render:function(){return this.$el.attr("tabindex","-1"),this},onPaste:function(e){e.preventDefault(),e.stopPropagation();var t,i,r=e.originalEvent.clipboardData.items;for(t=0;t<r.length;t++)"file"===r[t].kind&&(i=r[t].getAsFile())&&(this.controller.uploader.uploader.param("post_data",{post_title:wp.template("acf-dropzone-attachment-title")({fieldname:this.controller.field.get("name")}).trim(),post_type:"attachment"}),this.controller.uploader.uploader.uploader.addFile(i,i.name));return this}}),a=Backbone.View.extend({initialize:function(e){var t;return this.field=e.field,this.notice=!1,this.progress=!1,this.uploader=new wp.media.view.UploaderWindow({controller:this,uploader:{dropzone:this.el,container:this.el,params:{_acfuploader:this.field.get("key")}}}),t=this.$el.is('[data-uploader="wp"]')?this.el:this.field.$(".acf-gallery-attachments").get(0),console.log(t),this.pasteboard=new r({controller:this,el:this.$el.is('[data-uploader="wp"]')?this.el:this.field.$(".acf-gallery-attachments").get(0)}),this},render:function(){return e(this.uploader.render().el).appendTo(this.el),this.pasteboard.render(),this},ready:function(){var t=this;return this.$el.on("drop dragenter dragleave dragover",function(e){e.stopPropagation()}).on("drop",function(e){t.removeNotice()}),this.trigger("activate"),this.uploader.ready(),this.uploader.uploader.uploader.bind("FilesAdded",this.filesAdded,this),this.uploader.uploader.uploader.bind("BeforeUpload",this.fileBeforeUpload,this),this.uploader.uploader.uploader.bind("UploadProgress",this.fileUploadProgress,this),this.uploader.uploader.uploader.bind("FileUploaded",this.fileUploaded,this),this.uploader.uploader.uploader.bind("error",this.fileUploadError,this),this.pasteboard.render(),this},filesAdded:function(e,t){this.total=t.length,this.done=0},fileBeforeUpload:function(e,t){this.addProgress(),this.progress.setLabel(_.escape(t.name))},fileUploadProgress:function(e,t){this.addProgress(),this.progress.setProgress((100*this.done+t.percent)/this.total)},fileUploaded:function(t,e,i){var r;this.file=e;try{this.trigger("acf-dropzone-uploaded",e.attachment,this.done),this.done++,this.total===this.done&&this.removeProgress()}catch(e){try{r=JSON.parse(i.response),this.fileUploadError(t,{file:this.file,message:r.data.message})}catch(e){this.fileUploadError(t,{file:this.file,message:i.response})}}},fileUploadError:function(e,t){this.done++,this.total===this.done&&this.removeProgress(),this.trigger("acf-dropzone-error",t),this.addNotice({type:"error",bold:_.escape(t.file.name),message:t.message})},addProgress:function(){return this.progress||(this.progress=new t,this.progress.render().$el.appendTo(this.el)),this},removeProgress:function(e){return this.progress&&(this.progress.$el.remove(),this.progress=!1),this},addNotice:function(e){return this.notice=new i(e),this.notice.render(),this.notice.$el.prependTo(this.el),this},removeNotice:function(e){return this.notice&&(this.notice.remove(),this.notice=!1),this}});function n(i){var e,r,t;(i=i).$el.is(".dropzone")&&(r=i.parent(),(e=i.$('[data-uploader="wp"]').get(0))&&(i.$(".hide-if-value>p").contents().filter(function(){return 3==this.nodeType}).remove(),(t=new s).render(),t.$el.prependTo(i.$(".hide-if-value")),(o=new a({el:e,field:i})).render(),o.ready(),o.on("acf-dropzone-uploaded",function(e,t){r&&"repeater"===r.get("type")&&0<t?i.append(e,r):i.render(e)})))}function d(t){var e=t.$(".acf-gallery-main").get(0);(t=t).$el.is(".dropzone")&&((o=new a({el:e,field:t})).render(),o.ready(),o.on("acf-dropzone-uploaded",function(e){t.appendAttachment(e,"prepend"===t.get("insert")?0:void 0)}))}acf.addAction("ready_field/type=image",n),acf.addAction("ready_field/type=file",n),acf.addAction("ready_field/type=gallery",d),acf.addAction("append_field/type=image",n),acf.addAction("append_field/type=file",n),acf.addAction("append_field/type=gallery",d)}(jQuery,acf_dropzone);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1kcm9wem9uZS5qcyJdLCJuYW1lcyI6WyIkIiwiZHJvcHpvbmUiLCJVcGxvYWRlckluZm8iLCJ3cCIsIm1lZGlhIiwiVmlldyIsImV4dGVuZCIsInRhZ05hbWUiLCJjbGFzc05hbWUiLCJ0ZW1wbGF0ZSIsIlByb2dyZXNzIiwiQmFja2JvbmUiLCJyZW5kZXIiLCJ0aGlzIiwiJHByb2dyZXNzIiwiYWRkQ2xhc3MiLCIkbGFiZWwiLCIkYmFyIiwiJGVsIiwiYXBwZW5kIiwiYXBwZW5kVG8iLCJzZXRMYWJlbCIsImxhYmVsIiwidGV4dCIsInNldFByb2dyZXNzIiwicGVyY2VudCIsIndpZHRoIiwiTm90aWNlIiwiZXZlbnRzIiwiY2xpY2sgLm5vdGljZS1kaXNtaXNzIiwicHJvdG90eXBlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvcHRpb25zIiwidHlwZSIsIlBhc3RlYm9hcmQiLCJmb2N1cyIsImJsdXIiLCJsaXN0ZW5QYXN0ZSIsImUiLCJzZWxmIiwib24iLCJvblBhc3RlIiwic3RvcExpc3RlblBhc3RlIiwib2ZmIiwiaW5pdGlhbGl6ZSIsIm9wdCIsImNvbnRyb2xsZXIiLCJhdHRyIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJpIiwiYmxvYiIsIml0ZW1zIiwib3JpZ2luYWxFdmVudCIsImNsaXBib2FyZERhdGEiLCJsZW5ndGgiLCJraW5kIiwiZ2V0QXNGaWxlIiwidXBsb2FkZXIiLCJwYXJhbSIsInBvc3RfdGl0bGUiLCJmaWVsZG5hbWUiLCJmaWVsZCIsImdldCIsInRyaW0iLCJwb3N0X3R5cGUiLCJhZGRGaWxlIiwibmFtZSIsIkFDRkRyb3B6b25lIiwiJHBhc3RlYm9hcmQiLCJub3RpY2UiLCJwcm9ncmVzcyIsInZpZXciLCJVcGxvYWRlcldpbmRvdyIsImVsIiwiY29udGFpbmVyIiwicGFyYW1zIiwiX2FjZnVwbG9hZGVyIiwiaXMiLCJjb25zb2xlIiwibG9nIiwicGFzdGVib2FyZCIsInJlYWR5IiwicmVtb3ZlTm90aWNlIiwidHJpZ2dlciIsImJpbmQiLCJmaWxlc0FkZGVkIiwiZmlsZUJlZm9yZVVwbG9hZCIsImZpbGVVcGxvYWRQcm9ncmVzcyIsImZpbGVVcGxvYWRlZCIsImZpbGVVcGxvYWRFcnJvciIsImZpbGVzIiwidG90YWwiLCJkb25lIiwiZmlsZSIsImFkZFByb2dyZXNzIiwiXyIsImVzY2FwZSIsInJlc3BvbnNlIiwicmVzdWx0IiwiYXR0YWNobWVudCIsInJlbW92ZVByb2dyZXNzIiwiZXJyIiwiSlNPTiIsInBhcnNlIiwibWVzc2FnZSIsImRhdGEiLCJlcnIyIiwiZXJyb3IiLCJhZGROb3RpY2UiLCJib2xkIiwicmVtb3ZlIiwicHJlcGVuZFRvIiwiaW5pdEZpbGVEcm9wem9uZSIsInBhcmVudCIsImluZm8iLCJjb250ZW50cyIsImZpbHRlciIsIm5vZGVUeXBlIiwiaW5pdEdhbGxlcnlEcm9wem9uZSIsImFwcGVuZEF0dGFjaG1lbnQiLCJ1bmRlZmluZWQiLCJhY2YiLCJhZGRBY3Rpb24iLCJqUXVlcnkiLCJhY2ZfZHJvcHpvbmUiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVdBLEVBQUdDLEdBR2IsSUFBSUMsRUFBZUMsR0FBR0MsTUFBTUMsS0FBS0MsT0FBTyxDQUN2Q0MsUUFBVyxNQUNYQyxVQUFXLG9CQUNYQyxTQUFTTixHQUFHTSxTQUFTLHVCQUdsQkMsRUFBV0MsU0FBU04sS0FBS0MsT0FBTyxDQUNuQ0MsUUFBVyxNQUNYQyxVQUFXLHlCQUNYSSxPQUFPLFdBVU4sT0FUQUMsS0FBS0MsVUFBWWQsRUFBRSxXQUFXZSxTQUFTLHNCQUN2Q0YsS0FBS0csT0FBU2hCLEVBQUUsV0FBV2UsU0FBUyx3QkFDcENGLEtBQUtJLEtBQU9qQixFQUFFLFdBQ2RhLEtBQUtLLElBQ0hDLE9BQVFOLEtBQUtHLFFBQ2ZILEtBQUtDLFVBQ0hLLE9BQVFOLEtBQUtJLE1BQ2JHLFNBQVVQLEtBQUtLLEtBRVZMLE1BRVJRLFNBQVMsU0FBU0MsR0FDakJULEtBQUtHLE9BQU9PLEtBQUtELElBRWxCRSxZQUFZLFNBQVVDLEdB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QUFLMEcsV0FFWlAsVUFFRkksRUFBTyxJQUFJbEgsR0FDTlUsU0FDTHdHLEVBQUtsRyxJQUFJK0YsVUFBV2xELEVBQU0vRCxFQUFFLG9CQUc1QkMsRUFBVyxJQUFJb0UsRUFBWSxDQUMxQk0sR0FBSUEsRUFDSlosTUFBT0EsS0FFQ25ELFNBQ1RYLEVBQVNrRixRQUNUbEYsRUFBU3dDLEdBQUcsd0JBQXlCLFNBQVU0RCxFQUFZbEQsR0FDckRnRSxHQUFpQyxhQUF2QkEsRUFBT25ELElBQUksU0FBOEIsRUFBSmIsRUFDbkRZLEVBQU01QyxPQUFRa0YsRUFBWWMsR0FFMUJwRCxFQUFNbkQsT0FBT3lGLE9BS2hCLFNBQVNtQixFQUFxQnpELEdBQzdCLElBQUlZLEVBQUtaLEVBQU0vRCxFQUFFLHFCQUFxQmdFLElBQUksSUFDekNELEVBQVFBLEdBRUk3QyxJQUFJNkQsR0FBRyxnQkFJcEI5RSxFQUFXLElBQUlvRSxFQUFZLENBQzFCTSxHQUFJQSxFQUNKWixNQUFPQSxLQUVDbkQsU0FDVFgsRUFBU2tGLFFBQ1RsRixFQUFTd0MsR0FBRyx3QkFBeUIsU0FBVTRELEdBRTlDdEMsRUFBTTBELGlCQUNMcEIsRUFDd0IsWUFBeEJ0QyxFQUFNQyxJQUFJLFVBQTBCLE9BQUkwRCxNQU8zQ0MsSUFBSUMsVUFBVyx5QkFBNEJWLEdBQzNDUyxJQUFJQyxVQUFXLHdCQUE0QlYsR0FDM0NTLElBQUlDLFVBQVcsMkJBQTRCSixHQUczQ0csSUFBSUMsVUFBVywwQkFBNkJWLEdBQzVDUyxJQUFJQyxVQUFXLHlCQUE2QlYsR0FDNUNTLElBQUlDLFVBQVcsNEJBQTZCSixHQXRVN0MsQ0F5VUdLLE9BQVFDIiwiZmlsZSI6ImFjZi1kcm9wem9uZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oICQsIGRyb3B6b25lICl7XG5cblxuXHR2YXIgVXBsb2FkZXJJbmZvID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdHRhZ05hbWU6ICAgJ2RpdicsXG5cdFx0Y2xhc3NOYW1lOiAnYWNmLWRyb3B6b25lLWluZm8nLFxuXHRcdHRlbXBsYXRlOndwLnRlbXBsYXRlKCdhY2YtZHJvcHpvbmUtaW5mbycpXG5cdH0pO1xuXG5cdHZhciBQcm9ncmVzcyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblx0XHR0YWdOYW1lOiAgICdkaXYnLFxuXHRcdGNsYXNzTmFtZTogJ21lZGlhLXByb2dyZXNzLWJhci1ib3gnLFxuXHRcdHJlbmRlcjpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJHByb2dyZXNzID0gJCgnPGRpdiAvPicpLmFkZENsYXNzKCdtZWRpYS1wcm9ncmVzcy1iYXInKTtcblx0XHRcdHRoaXMuJGxhYmVsID0gJCgnPGRpdiAvPicpLmFkZENsYXNzKCdtZWRpYS1wcm9ncmVzcy1sYWJlbCcpO1xuXHRcdFx0dGhpcy4kYmFyID0gJCgnPGRpdiAvPicpO1xuXHRcdFx0dGhpcy4kZWxcblx0XHRcdFx0LmFwcGVuZCggdGhpcy4kbGFiZWwgKTtcblx0XHRcdHRoaXMuJHByb2dyZXNzXG5cdFx0XHRcdC5hcHBlbmQoIHRoaXMuJGJhciApXG5cdFx0XHRcdC5hcHBlbmRUbyggdGhpcy4kZWwgKTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzZXRMYWJlbDpmdW5jdGlvbihsYWJlbCkge1xuXHRcdFx0dGhpcy4kbGFiZWwudGV4dChsYWJlbCk7XG5cdFx0fSxcblx0XHRzZXRQcm9ncmVzczpmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHRcdHRoaXMuJGJhci53aWR0aCggKCBwZXJjZW50ICkrJyUnKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fSk7XG5cdHZhciBOb3RpY2UgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG5cdFx0dGVtcGxhdGU6d3AudGVtcGxhdGUoJ2FjZi1kcm9wem9uZS1ub3RpY2UnKSxcblx0XHRjbGFzc05hbWU6J25vdGljZSBpcy1kaXNtaXNzaWJsZScsXG5cdFx0ZXZlbnRzOntcblx0XHRcdCdjbGljayAubm90aWNlLWRpc21pc3MnIDogJ3JlbW92ZScsXG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKSB7XG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLiRlbC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudHlwZSk7XG5cdFx0fVxuXHR9KVxuXG5cdHZhciBQYXN0ZWJvYXJkID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXHRcdGV2ZW50czoge1xuXHRcdFx0Zm9jdXM6J2xpc3RlblBhc3RlJyxcblx0XHRcdGJsdXI6J3N0b3BMaXN0ZW5QYXN0ZSdcblx0XHR9LFxuXHRcdGxpc3RlblBhc3RlOmZ1bmN0aW9uKGUpe1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0dGhpcy4kZWwub24oJ3Bhc3RlJyxmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5vblBhc3RlLmFwcGx5KCBzZWxmLCBhcmd1bWVudHMgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0c3RvcExpc3RlblBhc3RlOmZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLiRlbC5vZmYoJ3Bhc3RlJyk7XG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHQpIHtcblx0XHRcdEJhY2tib25lLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0dGhpcy5jb250cm9sbGVyID0gb3B0LmNvbnRyb2xsZXI7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBtYWtlIGZvY3Vzc2FibGVcblx0XHRcdHRoaXMuJGVsLmF0dHIoJ3RhYmluZGV4JywnLTEnKTsvLy5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCd0cnVlJyk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdG9uUGFzdGU6ZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHR2YXIgaXRlbXMgPSBlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YS5pdGVtcywgXG5cdFx0XHRcdGksIGJsb2IsIGZpbGUsIGZpbGVuYW1lO1xuXHRcdFx0XG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrICkge1xuXG5cdFx0XHRcdGlmICggaXRlbXNbaV0ua2luZCAhPT0gJ2ZpbGUnICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gZ2V0IHBhc3RlZCBmaWxlIC4uLlxuXHRcdFx0XHRibG9iID0gaXRlbXNbaV0uZ2V0QXNGaWxlKCk7XG5cdFx0XHRcdGlmICggISEgYmxvYiApIHtcblx0XHRcdFx0XHQvLyAuLi4gYWRkIHRvIHBsdXBsb2FkXG5cblxuXHRcdFx0XHRcdHRoaXMuY29udHJvbGxlci51cGxvYWRlci51cGxvYWRlci5wYXJhbSgncG9zdF9kYXRhJywgeyBcblx0XHRcdFx0XHRcdHBvc3RfdGl0bGU6IHdwLnRlbXBsYXRlKCdhY2YtZHJvcHpvbmUtYXR0YWNobWVudC10aXRsZScpKHtcblx0XHRcdFx0XHRcdFx0ZmllbGRuYW1lOnRoaXMuY29udHJvbGxlci5maWVsZC5nZXQoJ25hbWUnKVxuXHRcdFx0XHRcdFx0fSkudHJpbSgpLFxuXHRcdFx0XHRcdFx0cG9zdF90eXBlOiAnYXR0YWNobWVudCcgXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdHRoaXMuY29udHJvbGxlci51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5hZGRGaWxlKCBibG9iLCBibG9iLm5hbWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHR9KTtcblxuXHR2YXIgQUNGRHJvcHpvbmUgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oIG9wdCApIHtcblx0XHRcdHZhciAkcGFzdGVib2FyZDtcblx0XHRcdHRoaXMuZmllbGQgPSBvcHQuZmllbGQ7XG5cdFx0XHRcblx0XHRcdHRoaXMubm90aWNlID0gZmFsc2U7XG5cdFx0XHR0aGlzLnByb2dyZXNzID0gZmFsc2U7XG5cdFx0XHR0aGlzLnVwbG9hZGVyID0gbmV3IHdwLm1lZGlhLnZpZXcuVXBsb2FkZXJXaW5kb3coe1xuXHRcdFx0XHRjb250cm9sbGVyOiB0aGlzLFxuXHRcdFx0XHR1cGxvYWRlcjoge1xuXHRcdFx0XHRcdGRyb3B6b25lOiAgdGhpcy5lbCxcblx0XHRcdFx0XHRjb250YWluZXI6IHRoaXMuZWwsXG5cdFx0XHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdFx0XHRfYWNmdXBsb2FkZXI6IHRoaXMuZmllbGQuZ2V0KCdrZXknKSxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0JHBhc3RlYm9hcmQgPSB0aGlzLiRlbC5pcygnW2RhdGEtdXBsb2FkZXI9XCJ3cFwiXScpID8gdGhpcy5lbCA6IHRoaXMuZmllbGQuJCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJykuZ2V0KDApO1xuXHRcdFx0Y29uc29sZS5sb2coJHBhc3RlYm9hcmQpXG5cdFx0XHR0aGlzLnBhc3RlYm9hcmQgPSBuZXcgUGFzdGVib2FyZCh7XG5cdFx0XHRcdGNvbnRyb2xsZXI6IHRoaXMsXG5cdFx0XHRcdGVsOiB0aGlzLiRlbC5pcygnW2RhdGEtdXBsb2FkZXI9XCJ3cFwiXScpID8gdGhpcy5lbCA6IHRoaXMuZmllbGQuJCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJykuZ2V0KDApXG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCB0aGlzLnVwbG9hZGVyLnJlbmRlcigpLmVsICkuYXBwZW5kVG8oIHRoaXMuZWwgKTtcblx0XHRcdHRoaXMucGFzdGVib2FyZC5yZW5kZXIoKTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHR0aGlzLiRlbFxuXHRcdFx0Lm9uKCdkcm9wIGRyYWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXInLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHQvLyBwcmV2ZW50IGJsb2NrIGVkaXRvciBmaWxlIGRyb3Bcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXHRcdFx0fSlcblx0XHRcdC5vbignZHJvcCcsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vIHJlc2V0IGVycm9yXG5cdFx0XHRcdHNlbGYucmVtb3ZlTm90aWNlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy50cmlnZ2VyKCdhY3RpdmF0ZScpXG5cdFx0XHR0aGlzLnVwbG9hZGVyLnJlYWR5KCk7XG5cdFx0XHQvL1xuXHRcdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdGaWxlc0FkZGVkJywgdGhpcy5maWxlc0FkZGVkLCB0aGlzICk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0JlZm9yZVVwbG9hZCcsIHRoaXMuZmlsZUJlZm9yZVVwbG9hZCwgdGhpcyApO1xuXHRcdFx0dGhpcy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdVcGxvYWRQcm9ncmVzcycsIHRoaXMuZmlsZVVwbG9hZFByb2dyZXNzLCB0aGlzICk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0ZpbGVVcGxvYWRlZCcsIHRoaXMuZmlsZVVwbG9hZGVkLCB0aGlzICk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ2Vycm9yJywgdGhpcy5maWxlVXBsb2FkRXJyb3IsIHRoaXMgKTtcblx0XHRcdHRoaXMucGFzdGVib2FyZC5yZW5kZXIoKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0ZmlsZXNBZGRlZDogZnVuY3Rpb24oIHVwbG9hZGVyLCBmaWxlcyApIHtcblx0XHRcdC8vXG5cdFx0XHR0aGlzLnRvdGFsID0gZmlsZXMubGVuZ3RoO1xuXHRcdFx0dGhpcy5kb25lID0gMDtcblx0XHRcdC8vX2FjZnVwbG9hZGVyXG5cdFx0XHQvL3RoaXMubm90aWNlID0gZmFsc2U7XG5cdFx0fSxcblx0XHRmaWxlQmVmb3JlVXBsb2FkOiBmdW5jdGlvbiggdXBsb2FkZXIsIGZpbGUgKSB7XG5cdFx0XHR0aGlzLmFkZFByb2dyZXNzKCk7XG5cdFx0XHR0aGlzLnByb2dyZXNzLnNldExhYmVsKCBfLmVzY2FwZShmaWxlLm5hbWUpICk7XG5cdFx0fSxcblx0XHRmaWxlVXBsb2FkUHJvZ3Jlc3M6ZnVuY3Rpb24oIHVwbG9hZGVyLCBmaWxlICkge1xuXHRcdFx0dGhpcy5hZGRQcm9ncmVzcygpO1xuXHRcdFx0dGhpcy5wcm9ncmVzcy5zZXRQcm9ncmVzcyggKCAxMDAgKiB0aGlzLmRvbmUgKyBmaWxlLnBlcmNlbnQgKSAvIHRoaXMudG90YWwgKTtcblx0XHR9LFxuXHRcdGZpbGVVcGxvYWRlZDpmdW5jdGlvbiggdXBsb2FkZXIsIGZpbGUsIHJlc3BvbnNlICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdHRoaXMuZmlsZSA9IGZpbGU7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2FjZi1kcm9wem9uZS11cGxvYWRlZCcsZmlsZS5hdHRhY2htZW50LHRoaXMuZG9uZSk7XHRcdFx0XHRcblx0XHRcdFx0dGhpcy5kb25lKys7XG5cdFx0XHRcdGlmICh0aGlzLnRvdGFsID09PSB0aGlzLmRvbmUgKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVQcm9ncmVzcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoKCBlcnIgKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gSlNPTi5wYXJzZSggcmVzcG9uc2UucmVzcG9uc2UgKTtcblx0XHRcdFx0XHR0aGlzLmZpbGVVcGxvYWRFcnJvciggdXBsb2FkZXIsIHtcblx0XHRcdFx0XHRcdGZpbGU6IHRoaXMuZmlsZSxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IHJlc3VsdC5kYXRhLm1lc3NhZ2Vcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBjYXRjaCAoIGVycjIgKSB7XG5cdFx0XHRcdFx0dGhpcy5maWxlVXBsb2FkRXJyb3IoIHVwbG9hZGVyLCB7XG5cdFx0XHRcdFx0XHRmaWxlOiB0aGlzLmZpbGUsXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiByZXNwb25zZS5yZXNwb25zZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmaWxlVXBsb2FkRXJyb3I6ZnVuY3Rpb24oIHVwbG9hZGVyLCBlcnJvciApIHtcblx0XHRcdHRoaXMuZG9uZSsrO1xuXHRcdFx0aWYgKHRoaXMudG90YWwgPT09IHRoaXMuZG9uZSApIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVQcm9ncmVzcygpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy50cmlnZ2VyKCAnYWNmLWRyb3B6b25lLWVycm9yJywgZXJyb3IgKTtcblxuXHRcdFx0dGhpcy5hZGROb3RpY2Uoe1xuXHRcdFx0XHR0eXBlOidlcnJvcicsXG5cdFx0XHRcdGJvbGQ6IF8uZXNjYXBlKGVycm9yLmZpbGUubmFtZSksXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2Vcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YWRkUHJvZ3Jlc3M6ZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHRoaXMucHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5wcm9ncmVzcyA9IG5ldyBQcm9ncmVzcygpO1xuXHRcdFx0dGhpcy5wcm9ncmVzcy5yZW5kZXIoKS4kZWwuYXBwZW5kVG8odGhpcy5lbCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHJlbW92ZVByb2dyZXNzOmZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdFx0aWYgKCAhIHRoaXMucHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnByb2dyZXNzLiRlbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMucHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0YWRkTm90aWNlOmZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdHRoaXMubm90aWNlID0gbmV3IE5vdGljZShvcHRpb25zKTtcblx0XHRcdHRoaXMubm90aWNlLnJlbmRlcigpO1xuXHRcdFx0dGhpcy5ub3RpY2UuJGVsLnByZXBlbmRUbyh0aGlzLmVsKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0cmVtb3ZlTm90aWNlOmZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdGlmICggISEgdGhpcy5ub3RpY2UgKSB7XG5cdFx0XHRcdHRoaXMubm90aWNlLnJlbW92ZSgpO1xuXHRcdFx0XHR0aGlzLm5vdGljZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHR9KTtcbi8qXG48ZGl2IGlkPVwibWVzc2FnZVwiIGNsYXNzPVwibm90aWNlIGlzLWRpc21pc3NpYmxlXCI+XG5cdDxwPm1zZzwvcD5cblx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RpY2UtZGlzbWlzc1wiPlxuXHRcdDxzcGFuIGNsYXNzPVwic2NyZWVuLXJlYWRlci10ZXh0XCI+RGlzbWlzcyB0aGlzIG5vdGljZS48L3NwYW4+XG5cdDwvYnV0dG9uPlxuPC9kaXY+XG4qL1xuXG5cblx0ZnVuY3Rpb24gaW5pdEZpbGVEcm9wem9uZSggZmllbGQgKSB7XG5cdFx0dmFyIGVsLFxuXHRcdFx0ZmllbGQgPSBmaWVsZCxcblx0XHRcdHBhcmVudCxcblx0XHRcdGluZm87XG5cblx0XHRpZiAoICEgZmllbGQuJGVsLmlzKCcuZHJvcHpvbmUnKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXJlbnQgPSBmaWVsZC5wYXJlbnQoKTtcblxuXHRcdGVsID0gZmllbGQuJCgnW2RhdGEtdXBsb2FkZXI9XCJ3cFwiXScpLmdldCgwKVxuXG5cdFx0aWYgKCAhIGVsICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTcxMDc2L3JlbW92ZS10ZXh0LXdpdGgtanF1ZXJ5XG5cdFx0ZmllbGQuJCgnLmhpZGUtaWYtdmFsdWU+cCcpXG5cdFx0XHQuY29udGVudHMoKVxuXHRcdFx0LmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLm5vZGVUeXBlID09IDM7IC8vTm9kZS5URVhUX05PREVcblx0XHRcdH0pXG5cdFx0XHQucmVtb3ZlKCk7XG5cblx0XHRpbmZvID0gbmV3IFVwbG9hZGVySW5mbygpO1xuXHRcdGluZm8ucmVuZGVyKCk7XG5cdFx0aW5mby4kZWwucHJlcGVuZFRvKCBmaWVsZC4kKCcuaGlkZS1pZi12YWx1ZScpICk7XG5cblxuXHRcdGRyb3B6b25lID0gbmV3IEFDRkRyb3B6b25lKHtcblx0XHRcdGVsOiBlbCxcblx0XHRcdGZpZWxkOiBmaWVsZFxuXHRcdH0pO1xuXHRcdGRyb3B6b25lLnJlbmRlcigpO1xuXHRcdGRyb3B6b25lLnJlYWR5KCk7XG5cdFx0ZHJvcHpvbmUub24oJ2FjZi1kcm9wem9uZS11cGxvYWRlZCcsIGZ1bmN0aW9uKCBhdHRhY2htZW50LCBpICl7XG5cdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQuZ2V0KCd0eXBlJykgPT09ICdyZXBlYXRlcicgJiYgaSA+IDAgKSB7XG5cdFx0XHRcdGZpZWxkLmFwcGVuZCggYXR0YWNobWVudCwgcGFyZW50ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmaWVsZC5yZW5kZXIoYXR0YWNobWVudCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0R2FsbGVyeURyb3B6b25lKCBmaWVsZCApIHtcblx0XHR2YXIgZWwgPSBmaWVsZC4kKCcuYWNmLWdhbGxlcnktbWFpbicpLmdldCgwKSxcblx0XHRcdGZpZWxkID0gZmllbGQ7XG5cblx0XHRpZiAoICEgZmllbGQuJGVsLmlzKCcuZHJvcHpvbmUnKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkcm9wem9uZSA9IG5ldyBBQ0ZEcm9wem9uZSh7XG5cdFx0XHRlbDogZWwsXG5cdFx0XHRmaWVsZDogZmllbGRcblx0XHR9KTtcblx0XHRkcm9wem9uZS5yZW5kZXIoKTtcblx0XHRkcm9wem9uZS5yZWFkeSgpO1xuXHRcdGRyb3B6b25lLm9uKCdhY2YtZHJvcHpvbmUtdXBsb2FkZWQnLCBmdW5jdGlvbiggYXR0YWNobWVudCApe1xuXG5cdFx0XHRmaWVsZC5hcHBlbmRBdHRhY2htZW50KFxuXHRcdFx0XHRhdHRhY2htZW50LFxuXHRcdFx0XHRmaWVsZC5nZXQoJ2luc2VydCcpID09PSAncHJlcGVuZCcgPyAwIDogdW5kZWZpbmVkXG5cdFx0XHQpO1xuXG5cdFx0fSk7XG5cdH1cblxuXG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWltYWdlJywgICBpbml0RmlsZURyb3B6b25lICk7XG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWZpbGUnLCAgICBpbml0RmlsZURyb3B6b25lICk7XG5cdGFjZi5hZGRBY3Rpb24oICdyZWFkeV9maWVsZC90eXBlPWdhbGxlcnknLCBpbml0R2FsbGVyeURyb3B6b25lICk7XG5cblx0Ly8gY3JlYXRlZCBmcm9tIHJlcGVhdGVyXG5cdGFjZi5hZGRBY3Rpb24oICdhcHBlbmRfZmllbGQvdHlwZT1pbWFnZScsICAgaW5pdEZpbGVEcm9wem9uZSApO1xuXHRhY2YuYWRkQWN0aW9uKCAnYXBwZW5kX2ZpZWxkL3R5cGU9ZmlsZScsICAgIGluaXRGaWxlRHJvcHpvbmUgKTtcblx0YWNmLmFkZEFjdGlvbiggJ2FwcGVuZF9maWVsZC90eXBlPWdhbGxlcnknLCBpbml0R2FsbGVyeURyb3B6b25lICk7XG5cblxufSkoalF1ZXJ5LCBhY2ZfZHJvcHpvbmUgKTtcbiJdfQ==
